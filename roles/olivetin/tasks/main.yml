---

- name: Include uninstall tasks
  ansible.builtin.include_tasks: uninstall.yml
  when: olivetin_uninstall

- name: Include package installation
  ansible.builtin.include_tasks: install_package.yml
  when:
    - not olivetin_uninstall
    - olivetin_install_method == 'package'

- name: Include Docker installation
  ansible.builtin.include_tasks: install_docker.yml
  when:
    - not olivetin_uninstall
    - olivetin_install_method == 'docker'

- name: Install Python password hashing dependencies
  ansible.builtin.include_tasks: install_password_deps.yml
  when: not olivetin_uninstall

- name: Include user management
  ansible.builtin.include_tasks: users.yml
  when: not olivetin_uninstall

- name: Include configuration setup
  ansible.builtin.include_tasks: configure.yml
  when: not olivetin_uninstall

- name: Start OliveTin service
  ansible.builtin.include_tasks: start_service.yml
  when: not olivetin_uninstall
