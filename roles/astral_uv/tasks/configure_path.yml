---
# Configure PATH in shell profiles

- name: Add uv to PATH in shell profiles
  ansible.builtin.blockinfile:
    path: "{{ item }}"
    marker: "# {mark} ANSIBLE MANAGED - astral_uv PATH"
    block: |
      # Astral uv
      export PATH="{{ uv_install_dir }}:$PATH"
    create: true
    owner: "{{ uv_owner }}"
    group: "{{ uv_group }}"
    mode: "0644"
  loop: "{{ uv_shell_profiles }}"
  when: item is exists or 'bashrc' in item or 'zshrc' in item
  failed_when: false
